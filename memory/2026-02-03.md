# 2026-02-03

## Done
- **Task Lifecycle Pipeline deployed** — 6-stage (spec→working→qa→ready→approved→deployed). Alex built it, Clark QA'd — found migration didn't remap old statuses (NULL in SQLite) + 7 files with old status refs. Fixed all, committed, pushed.
- **Board slider v3 iterations** — David provided video reference + full carousel spec. Three iterations: v1 (Alex, broken CSS), v2 (Clark fix, still wrong pattern), v3 (Clark rewrite with arrows in header). David rejected v3 (whole page slides, empty columns compressed, arrows broken). Rui spawned for full rewrite on `feature/board-slider-v3` branch — completed with custom CSS, scrollbar hiding, header arrow nav, vanilla JS. Clark rebuilt Tailwind CSS (`npm run build:css`) to include missing classes. **QA in progress** — need to verify, merge, deploy.
- **QA cycle completed** — Ryan tested all 9 pages (all pass), Stephan tested forms/API (all pass). Found missing `DELETE /api/v1/tasks/:id` endpoint — added and deployed.
- **Revolut API progress** — David enabling API access. CSR was wrong format (Revolut needs self-signed X509 cert, not CSR). Regenerated `revolut-cert.pem`. Client ID received: stored in `~/.openclaw/workspace/revolut-certs/.env`. Redirect URI: `https://beat.clarksterling.ai/callbacks/revolut`. Awaiting auth code from David.
- **MC task management adopted** — Now logging tasks to MC before spawning agents. Task #34 (board slider), #35 (Revolut API for David), #36 (QA cycle) all tracked through pipeline.
- **API delete endpoint added** — `DELETE /api/v1/tasks/:id` for sub-agent cleanup.

## Active MC Tasks
- **#28** [spec] Add Hotwire for invoice builder (low priority)
- **#32** [blocked] Integrate bank feed — waiting on David's auth code
- **#34** [qa] Board slider v3 — Rui's rewrite on `feature/board-slider-v3`, Tailwind rebuilt, needs final QA + merge
- **#35** [spec] Revolut API: assigned to David — client ID received, awaiting auth code

## Revolut Integration Status — CONNECTED ✅
- Private key: `~/.openclaw/workspace/revolut-certs/revolut-private.pem`
- Self-signed cert: `~/.openclaw/workspace/revolut-certs/revolut-cert.pem` (2yr validity)
- All creds in: `~/.openclaw/workspace/revolut-certs/.env` (client ID, tokens, JWT issuer, redirect URI)
- Token refresh cron: every 30min (cron ID: e1763b6d), runs `refresh_token.sh`
- **Accounts found**: GBP (£1,138.37), EUR (€1,801.78), USD ($0), BTC, ETH, SOL
- **Transactions flowing**: card payments, merchant data, categories all available
- **Next**: Wire Revolut data into Bean Counter — create RevolutService, sync transactions to bank_transactions table, auto-categorize

## Security Fix Deployed — beat.clarksterling.ai
- **Problem:** Rails debug page exposed in production (development mode, no RAILS_ENV set). Leaked filesystem paths, username, full routing table, gem versions.
- **Fix:** Set RAILS_ENV=production in start.sh + .env, fixed production.rb (disabled active_storage/active_record refs), enabled public_file_server + asset compilation, added security headers (X-Frame-Options, XSS, nosniff, referrer-policy, permissions-policy), verified dev_login/qa_login return 404.
- **Commit:** `3364898` on fix/security-hardening, merged to main, pushed to GitHub.
- **Verified:** 404 pages show generic error (no debug info), security headers present, auth enforced on all protected routes.

## Key Learnings
- **Tailwind CSS builds are stale** in MC — must run `npm run build:css` after adding new utility classes. Now in `start.sh`.
- **Revolut API needs X509 self-signed cert**, not CSR. `openssl req -new -x509 -key ... -out cert.pem`
- **DOMContentLoaded doesn't fire with Turbo** — need `turbo:load` + `turbo:render` listeners
- **David wants slider arrows in header row** (like game carousel), not overlaid on scroll container
